!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.Cropper=b())}(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){var c,d;for(c=0;c<b.length;c++)d=b[c],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a){return f(a)||g(a)||h()}function f(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function g(a){return Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function hb(a){return"number"==typeof a&&!gb(a)}function jb(a){return"undefined"==typeof a}function kb(b){return"object"===a(b)&&null!==b}function mb(a){var b,c;if(!kb(a))return!1;try{return b=a.constructor,c=b.prototype,b&&c&&lb.call(c,"isPrototypeOf")}catch(d){return!1}}function nb(a){return"function"==typeof a}function pb(a){return Array.from?Array.from(a):ob.call(a)}function qb(a,b){return a&&nb(b)&&(Array.isArray(a)||hb(a.length)?pb(a).forEach(function(c,d){b.call(a,c,d,a)}):kb(a)&&Object.keys(a).forEach(function(c){b.call(a,a[c],c,a)})),a}function tb(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return sb.test(a)?Math.round(a*b)/b:a}function vb(a,b){var c=a.style;qb(b,function(a,b){ub.test(b)&&hb(a)&&(a="".concat(a,"px")),c[b]=a})}function wb(a,b){return a.classList?a.classList.contains(b):a.className.indexOf(b)>-1}function xb(a,b){if(b){if(hb(a.length))return qb(a,function(a){xb(a,b)}),void 0;if(a.classList)return a.classList.add(b),void 0;var c=a.className.trim();c?c.indexOf(b)<0&&(a.className="".concat(c," ").concat(b)):a.className=b}}function yb(a,b){return b?hb(a.length)?(qb(a,function(a){yb(a,b)}),void 0):a.classList?(a.classList.remove(b),void 0):(a.className.indexOf(b)>=0&&(a.className=a.className.replace(b,"")),void 0):void 0}function zb(a,b,c){return b?hb(a.length)?(qb(a,function(a){zb(a,b,c)}),void 0):(c?xb(a,b):yb(a,b),void 0):void 0}function Bb(a){return a.replace(Ab,"$1-$2").toLowerCase()}function Cb(a,b){return kb(a[b])?a[b]:a.dataset?a.dataset[b]:a.getAttribute("data-".concat(Bb(b)))}function Db(a,b,c){kb(c)?a[b]=c:a.dataset?a.dataset[b]=c:a.setAttribute("data-".concat(Bb(b)),c)}function Eb(a,b){if(kb(a[b]))try{delete a[b]}catch(c){a[b]=void 0}else if(a.dataset)try{delete a.dataset[b]}catch(c){a.dataset[b]=void 0}else a.removeAttribute("data-".concat(Bb(b)))}function Hb(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},e=c;b.trim().split(Fb).forEach(function(b){if(!Gb){var f=a.listeners;f&&f[b]&&f[b][c]&&(e=f[b][c],delete f[b][c],0===Object.keys(f[b]).length&&delete f[b],0===Object.keys(f).length&&delete a.listeners)}a.removeEventListener(b,e,d)})}function Ib(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},e=c;b.trim().split(Fb).forEach(function(b){if(d.once&&!Gb){var f=a.listeners,g=void 0===f?{}:f;e=function(){delete g[b][c],a.removeEventListener(b,e,d);for(var f=arguments.length,h=new Array(f),i=0;f>i;i++)h[i]=arguments[i];c.apply(a,h)},g[b]||(g[b]={}),g[b][c]&&a.removeEventListener(b,g[b][c],d),g[b][c]=e,a.listeners=g}a.addEventListener(b,e,d)})}function Jb(a,b,c){var d;return nb(Event)&&nb(CustomEvent)?d=new CustomEvent(b,{detail:c,bubbles:!0,cancelable:!0}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)}function Kb(a){var b=a.getBoundingClientRect();return{left:b.left+(window.pageXOffset-document.documentElement.clientLeft),top:b.top+(window.pageYOffset-document.documentElement.clientTop)}}function Nb(a){var b=a.match(Mb);return null!==b&&(b[1]!==Lb.protocol||b[2]!==Lb.hostname||b[3]!==Lb.port)}function Ob(a){var b="timestamp=".concat((new Date).getTime());return a+(-1===a.indexOf("?")?"?":"&")+b}function Pb(a){var h,b=a.rotate,c=a.scaleX,d=a.scaleY,e=a.translateX,f=a.translateY,g=[];return hb(e)&&0!==e&&g.push("translateX(".concat(e,"px)")),hb(f)&&0!==f&&g.push("translateY(".concat(f,"px)")),hb(b)&&0!==b&&g.push("rotate(".concat(b,"deg)")),hb(c)&&1!==c&&g.push("scaleX(".concat(c,")")),hb(d)&&1!==d&&g.push("scaleY(".concat(d,")")),h=g.length?g.join(" "):"none",{WebkitTransform:h,msTransform:h,transform:h}}function Qb(a){var b=rb({},a),c=[];return qb(a,function(a,d){delete b[d],qb(b,function(b){var d=Math.abs(a.startX-b.startX),e=Math.abs(a.startY-b.startY),f=Math.abs(a.endX-b.endX),g=Math.abs(a.endY-b.endY),h=Math.sqrt(d*d+e*e),i=Math.sqrt(f*f+g*g),j=(i-h)/h;c.push(j)})}),c.sort(function(a,b){return Math.abs(a)<Math.abs(b)}),c[0]}function Rb(a,b){var c=a.pageX,d=a.pageY,e={endX:c,endY:d};return b?e:rb({startX:c,startY:d},e)}function Sb(a){var b=0,c=0,d=0;return qb(a,function(a){var e=a.startX,f=a.startY;b+=e,c+=f,d+=1}),b/=d,c/=d,{pageX:b,pageY:c}}function Tb(a){var h,b=a.aspectRatio,c=a.height,d=a.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",f=ib(d),g=ib(c);return f&&g?(h=c*b,"contain"===e&&h>d||"cover"===e&&d>h?c=d/b:d=c*b):f?c=d/b:g&&(d=c*b),{width:d,height:c}}function Ub(a){var e,f,g,h,i,b=a.width,c=a.height,d=a.degree;return d=Math.abs(d)%180,90===d?{width:c,height:b}:(e=d%90*Math.PI/180,f=Math.sin(e),g=Math.cos(e),h=b*g+c*f,i=b*f+c*g,d>90?{width:i,height:h}:{width:h,height:i})}function Vb(a,b,c,d){var f=b.aspectRatio,g=b.naturalWidth,h=b.naturalHeight,i=b.rotate,j=void 0===i?0:i,k=b.scaleX,l=void 0===k?1:k,m=b.scaleY,n=void 0===m?1:m,o=c.aspectRatio,p=c.naturalWidth,q=c.naturalHeight,r=d.fillColor,s=void 0===r?"transparent":r,t=d.imageSmoothingEnabled,u=void 0===t?!0:t,v=d.imageSmoothingQuality,w=void 0===v?"low":v,x=d.maxWidth,y=void 0===x?1/0:x,z=d.maxHeight,A=void 0===z?1/0:z,B=d.minWidth,C=void 0===B?0:B,D=d.minHeight,E=void 0===D?0:D,F=document.createElement("canvas"),G=F.getContext("2d"),H=Tb({aspectRatio:o,width:y,height:A}),I=Tb({aspectRatio:o,width:C,height:E},"cover"),J=Math.min(H.width,Math.max(I.width,p)),K=Math.min(H.height,Math.max(I.height,q)),L=Tb({aspectRatio:f,width:y,height:A}),M=Tb({aspectRatio:f,width:C,height:E},"cover"),N=Math.min(L.width,Math.max(M.width,g)),O=Math.min(L.height,Math.max(M.height,h)),P=[-N/2,-O/2,N,O];return F.width=tb(J),F.height=tb(K),G.fillStyle=s,G.fillRect(0,0,J,K),G.save(),G.translate(J/2,K/2),G.rotate(j*Math.PI/180),G.scale(l,n),G.imageSmoothingEnabled=u,G.imageSmoothingQuality=w,G.drawImage.apply(G,[a].concat(e(P.map(function(a){return Math.floor(tb(a))})))),G.restore(),F}function Xb(a,b,c){var e,d="";for(c+=b,e=b;c>e;e+=1)d+=Wb(a.getUint8(e));return d}function Zb(a){var b=a.replace(Yb,""),c=atob(b),d=new ArrayBuffer(c.length),e=new Uint8Array(d);return qb(e,function(a,b){e[b]=c.charCodeAt(b)}),d}function $b(a,b){for(var c=[],d=8192,e=new Uint8Array(a);e.length>0;)c.push(Wb.apply(null,pb(e.subarray(0,d)))),e=e.subarray(d);return"data:".concat(b,";base64,").concat(btoa(c.join("")))}function _b(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,b=new DataView(a);try{if(255===b.getUint8(0)&&216===b.getUint8(1))for(g=b.byteLength,h=2;g>h+1;){if(255===b.getUint8(h)&&225===b.getUint8(h+1)){e=h;break}h+=1}if(e&&(i=e+4,j=e+10,"Exif"===Xb(b,i,4)&&(k=b.getUint16(j),d=18761===k,(d||19789===k)&&42===b.getUint16(j+2,d)&&(l=b.getUint32(j+4,d),l>=8&&(f=j+l)))),f)for(m=b.getUint16(f,d),o=0;m>o;o+=1)if(n=f+12*o+2,274===b.getUint16(n,d)){n+=8,c=b.getUint16(n,d),b.setUint16(n,1,d);break}}catch(p){c=1}return c}function ac(a){var b=0,c=1,d=1;switch(a){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90,d=-1;break;case 6:b=90;break;case 7:b=90,c=-1;break;case 8:b=-90}return{rotate:b,scaleX:c,scaleY:d}}var i="undefined"!=typeof window,j=i?window:{},k=i?"ontouchstart"in j.document.documentElement:!1,l=i?"PointerEvent"in j:!1,m="cropper",n="all",o="crop",p="move",q="zoom",r="e",s="w",t="s",u="n",v="ne",w="nw",x="se",y="sw",z="".concat(m,"-crop"),A="".concat(m,"-disabled"),B="".concat(m,"-hidden"),C="".concat(m,"-hide"),D="".concat(m,"-invisible"),E="".concat(m,"-modal"),F="".concat(m,"-move"),G="".concat(m,"Action"),H="".concat(m,"Preview"),I="crop",J="move",K="none",L="crop",M="cropend",N="cropmove",O="cropstart",P="dblclick",Q=k?"touchstart":"mousedown",R=k?"touchmove":"mousemove",S=k?"touchend touchcancel":"mouseup",T=l?"pointerdown":Q,U=l?"pointermove":R,V=l?"pointerup pointercancel":S,W="ready",X="resize",Y="wheel",Z="zoom",$="image/jpeg",_=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ab=/^data:image\/jpeg;base64,/,bb=/^img|canvas$/i,cb=200,db=100,eb={viewMode:0,dragMode:I,initialAspectRatio:0/0,aspectRatio:0/0,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},fb='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',gb=Number.isNaN||j.isNaN,ib=function(a){return a>0&&1/0>a},lb=Object.prototype.hasOwnProperty,ob=Array.prototype.slice,rb=Object.assign||function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return kb(a)&&c.length>0&&c.forEach(function(b){kb(b)&&Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},sb=/\.\d*(?:0|9){12}\d*$/,ub=/^width|height|left|top|marginLeft|marginTop$/,Ab=/([a-z\d])([A-Z])/g,Fb=/\s\s*/,Gb=function(){var b,c,d,a=!1;return i&&(b=!1,c=function(){},d=Object.defineProperty({},"once",{get:function(){return a=!0,b},set:function(a){b=a}}),j.addEventListener("test",c,d),j.removeEventListener("test",c,d)),a}(),Lb=j.location,Mb=/^(\w+:)\/\/([^:\/?#]*):?(\d*)/i,Wb=String.fromCharCode,Yb=/^data:.*,/,bc={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e,a=this.element,b=this.options,c=this.container,d=this.cropper;xb(d,B),yb(a,B),e={width:Math.max(c.offsetWidth,Number(b.minContainerWidth)||200),height:Math.max(c.offsetHeight,Number(b.minContainerHeight)||100)},this.containerData=e,vb(d,{width:e.width,height:e.height}),xb(a,B),yb(d,B)},initCanvas:function(){var j,a=this.containerData,b=this.imageData,c=this.options.viewMode,d=90===Math.abs(b.rotate)%180,e=d?b.naturalHeight:b.naturalWidth,f=d?b.naturalWidth:b.naturalHeight,g=e/f,h=a.width,i=a.height;a.height*g>a.width?3===c?h=a.height*g:i=a.width/g:3===c?i=a.width/g:h=a.height*g,j={aspectRatio:g,naturalWidth:e,naturalHeight:f,width:h,height:i},j.left=(a.width-h)/2,j.top=(a.height-i)/2,j.oldLeft=j.left,j.oldTop=j.top,this.canvasData=j,this.limited=1===c||2===c,this.limitCanvas(!0,!0),this.initialImageData=rb({},b),this.initialCanvasData=rb({},j)},limitCanvas:function(a,b){var j,k,l,m,n,c=this.options,d=this.containerData,e=this.canvasData,f=this.cropBoxData,g=c.viewMode,h=e.aspectRatio,i=this.cropped&&f;a&&(j=Number(c.minCanvasWidth)||0,k=Number(c.minCanvasHeight)||0,g>1?(j=Math.max(j,d.width),k=Math.max(k,d.height),3===g&&(k*h>j?j=k*h:k=j/h)):g>0&&(j?j=Math.max(j,i?f.width:0):k?k=Math.max(k,i?f.height:0):i&&(j=f.width,k=f.height,k*h>j?j=k*h:k=j/h)),l=Tb({aspectRatio:h,width:j,height:k}),j=l.width,k=l.height,e.minWidth=j,e.minHeight=k,e.maxWidth=1/0,e.maxHeight=1/0),b&&(g>(i?0:1)?(m=d.width-e.width,n=d.height-e.height,e.minLeft=Math.min(0,m),e.minTop=Math.min(0,n),e.maxLeft=Math.max(0,m),e.maxTop=Math.max(0,n),i&&this.limited&&(e.minLeft=Math.min(f.left,f.left+(f.width-e.width)),e.minTop=Math.min(f.top,f.top+(f.height-e.height)),e.maxLeft=f.left,e.maxTop=f.top,2===g&&(e.width>=d.width&&(e.minLeft=Math.min(0,m),e.maxLeft=Math.max(0,m)),e.height>=d.height&&(e.minTop=Math.min(0,n),e.maxTop=Math.max(0,n))))):(e.minLeft=-e.width,e.minTop=-e.height,e.maxLeft=d.width,e.maxTop=d.height))},renderCanvas:function(a,b){var e,f,g,h,i,c=this.canvasData,d=this.imageData;b&&(e=Ub({width:d.naturalWidth*Math.abs(d.scaleX||1),height:d.naturalHeight*Math.abs(d.scaleY||1),degree:d.rotate||0}),f=e.width,g=e.height,h=c.width*(f/c.naturalWidth),i=c.height*(g/c.naturalHeight),c.left-=(h-c.width)/2,c.top-=(i-c.height)/2,c.width=h,c.height=i,c.aspectRatio=f/g,c.naturalWidth=f,c.naturalHeight=g,this.limitCanvas(!0,!1)),(c.width>c.maxWidth||c.width<c.minWidth)&&(c.left=c.oldLeft),(c.height>c.maxHeight||c.height<c.minHeight)&&(c.top=c.oldTop),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),this.limitCanvas(!1,!0),c.left=Math.min(Math.max(c.left,c.minLeft),c.maxLeft),c.top=Math.min(Math.max(c.top,c.minTop),c.maxTop),c.oldLeft=c.left,c.oldTop=c.top,vb(this.canvas,rb({width:c.width,height:c.height},Pb({translateX:c.left,translateY:c.top}))),this.renderImage(a),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(a){var b=this.canvasData,c=this.imageData,d=c.naturalWidth*(b.width/b.naturalWidth),e=c.naturalHeight*(b.height/b.naturalHeight);rb(c,{width:d,height:e,left:(b.width-d)/2,top:(b.height-e)/2}),vb(this.image,rb({width:c.width,height:c.height},Pb(rb({translateX:c.left,translateY:c.top},c)))),a&&this.output()},initCropBox:function(){var a=this.options,b=this.canvasData,c=a.aspectRatio||a.initialAspectRatio,d=Number(a.autoCropArea)||.8,e={width:b.width,height:b.height};c&&(b.height*c>b.width?e.height=e.width/c:e.width=e.height*c),this.cropBoxData=e,this.limitCropBox(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.width=Math.max(e.minWidth,e.width*d),e.height=Math.max(e.minHeight,e.height*d),e.left=b.left+(b.width-e.width)/2,e.top=b.top+(b.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCropBoxData=rb({},e)},limitCropBox:function(a,b){var i,j,k,l,c=this.options,d=this.containerData,e=this.canvasData,f=this.cropBoxData,g=this.limited,h=c.aspectRatio;a&&(i=Number(c.minCropBoxWidth)||0,j=Number(c.minCropBoxHeight)||0,k=g?Math.min(d.width,e.width,e.width+e.left,d.width-e.left):d.width,l=g?Math.min(d.height,e.height,e.height+e.top,d.height-e.top):d.height,i=Math.min(i,d.width),j=Math.min(j,d.height),h&&(i&&j?j*h>i?j=i/h:i=j*h:i?j=i/h:j&&(i=j*h),l*h>k?l=k/h:k=l*h),f.minWidth=Math.min(i,k),f.minHeight=Math.min(j,l),f.maxWidth=k,f.maxHeight=l),b&&(g?(f.minLeft=Math.max(0,e.left),f.minTop=Math.max(0,e.top),f.maxLeft=Math.min(d.width,e.left+e.width)-f.width,f.maxTop=Math.min(d.height,e.top+e.height)-f.height):(f.minLeft=0,f.minTop=0,f.maxLeft=d.width-f.width,f.maxTop=d.height-f.height))},renderCropBox:function(){var a=this.options,b=this.containerData,c=this.cropBoxData;(c.width>c.maxWidth||c.width<c.minWidth)&&(c.left=c.oldLeft),(c.height>c.maxHeight||c.height<c.minHeight)&&(c.top=c.oldTop),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),this.limitCropBox(!1,!0),c.left=Math.min(Math.max(c.left,c.minLeft),c.maxLeft),c.top=Math.min(Math.max(c.top,c.minTop),c.maxTop),c.oldLeft=c.left,c.oldTop=c.top,a.movable&&a.cropBoxMovable&&Db(this.face,G,c.width>=b.width&&c.height>=b.height?p:n),vb(this.cropBox,rb({width:c.width,height:c.height},Pb({translateX:c.left,translateY:c.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Jb(this.element,L,this.getData())}},cc={initPreview:function(){var e,a=this.crossOrigin,b=this.options.preview,c=a?this.crossOriginUrl:this.url,d=document.createElement("img");a&&(d.crossOrigin=a),d.src=c,this.viewBox.appendChild(d),this.viewBoxImage=d,b&&(e=b,"string"==typeof b?e=this.element.ownerDocument.querySelectorAll(b):b.querySelector&&(e=[b]),this.previews=e,qb(e,function(b){var d=document.createElement("img");Db(b,H,{width:b.offsetWidth,height:b.offsetHeight,html:b.innerHTML}),a&&(d.crossOrigin=a),d.src=c,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',b.innerHTML="",b.appendChild(d)}))},resetPreview:function(){qb(this.previews,function(a){var b=Cb(a,H);vb(a,{width:b.width,height:b.height}),a.innerHTML=b.html,Eb(a,H)})},preview:function(){var a=this.imageData,b=this.canvasData,c=this.cropBoxData,d=c.width,e=c.height,f=a.width,g=a.height,h=c.left-b.left-a.left,i=c.top-b.top-a.top;this.cropped&&!this.disabled&&(vb(this.viewBoxImage,rb({width:f,height:g},Pb(rb({translateX:-h,translateY:-i},a)))),qb(this.previews,function(b){var c=Cb(b,H),j=c.width,k=c.height,l=j,m=k,n=1;d&&(n=j/d,m=e*n),e&&m>k&&(n=k/e,l=d*n,m=k),vb(b,{width:l,height:m}),vb(b.getElementsByTagName("img")[0],rb({width:f*n,height:g*n},Pb(rb({translateX:-h*n,translateY:-i*n},a))))}))}},dc={bind:function(){var a=this.element,b=this.options,c=this.cropper;nb(b.cropstart)&&Ib(a,O,b.cropstart),nb(b.cropmove)&&Ib(a,N,b.cropmove),nb(b.cropend)&&Ib(a,M,b.cropend),nb(b.crop)&&Ib(a,L,b.crop),nb(b.zoom)&&Ib(a,Z,b.zoom),Ib(c,T,this.onCropStart=this.cropStart.bind(this)),b.zoomable&&b.zoomOnWheel&&Ib(c,Y,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),b.toggleDragModeOnDblclick&&Ib(c,P,this.onDblclick=this.dblclick.bind(this)),Ib(a.ownerDocument,U,this.onCropMove=this.cropMove.bind(this)),Ib(a.ownerDocument,V,this.onCropEnd=this.cropEnd.bind(this)),b.responsive&&Ib(window,X,this.onResize=this.resize.bind(this))},unbind:function(){var a=this.element,b=this.options,c=this.cropper;nb(b.cropstart)&&Hb(a,O,b.cropstart),nb(b.cropmove)&&Hb(a,N,b.cropmove),nb(b.cropend)&&Hb(a,M,b.cropend),nb(b.crop)&&Hb(a,L,b.crop),nb(b.zoom)&&Hb(a,Z,b.zoom),Hb(c,T,this.onCropStart),b.zoomable&&b.zoomOnWheel&&Hb(c,Y,this.onWheel,{passive:!1,capture:!0}),b.toggleDragModeOnDblclick&&Hb(c,P,this.onDblclick),Hb(a.ownerDocument,U,this.onCropMove),Hb(a.ownerDocument,V,this.onCropEnd),b.responsive&&Hb(window,X,this.onResize)}},ec={resize:function(){var f,g,h,a=this.options,b=this.container,c=this.containerData,d=Number(a.minContainerWidth)||cb,e=Number(a.minContainerHeight)||db;this.disabled||c.width<=d||c.height<=e||(f=b.offsetWidth/c.width,(1!==f||b.offsetHeight!==c.height)&&(a.restore&&(g=this.getCanvasData(),h=this.getCropBoxData()),this.render(),a.restore&&(this.setCanvasData(qb(g,function(a,b){g[b]=a*f})),this.setCropBoxData(qb(h,function(a,b){h[b]=a*f})))))},dblclick:function(){this.disabled||this.options.dragMode===K||this.setDragMode(wb(this.dragBox,z)?J:I)},wheel:function(a){var b=this,c=Number(this.options.wheelZoomRatio)||.1,d=1;this.disabled||(a.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){b.wheeling=!1},50),a.deltaY?d=a.deltaY>0?1:-1:a.wheelDelta?d=-a.wheelDelta/120:a.detail&&(d=a.detail>0?1:-1),this.zoom(-d*c,a)))},cropStart:function(a){var d,e,f,b=a.buttons,c=a.button;this.disabled||hb(b)&&1!==b||hb(c)&&0!==c||a.ctrlKey||(d=this.options,e=this.pointers,a.changedTouches?qb(a.changedTouches,function(a){e[a.identifier]=Rb(a)}):e[a.pointerId||0]=Rb(a),f=Object.keys(e).length>1&&d.zoomable&&d.zoomOnTouch?q:Cb(a.target,G),_.test(f)&&Jb(this.element,O,{originalEvent:a,action:f})!==!1&&(a.preventDefault(),this.action=f,this.cropping=!1,f===o&&(this.cropping=!0,xb(this.dragBox,E))))},cropMove:function(a){var c,b=this.action;!this.disabled&&b&&(c=this.pointers,a.preventDefault(),Jb(this.element,N,{originalEvent:a,action:b})!==!1&&(a.changedTouches?qb(a.changedTouches,function(a){rb(c[a.identifier]||{},Rb(a,!0))}):rb(c[a.pointerId||0]||{},Rb(a,!0)),this.change(a)))},cropEnd:function(a){if(!this.disabled){var b=this.action,c=this.pointers;a.changedTouches?qb(a.changedTouches,function(a){delete c[a.identifier]}):delete c[a.pointerId||0],b&&(a.preventDefault(),Object.keys(c).length||(this.action=""),this.cropping&&(this.cropping=!1,zb(this.dragBox,E,this.cropped&&this.options.modal)),Jb(this.element,M,{originalEvent:a,action:b}))}}},fc={change:function(a){var G,H,I,J,b=this.options,c=this.canvasData,d=this.containerData,e=this.cropBoxData,f=this.pointers,g=this.action,h=b.aspectRatio,i=e.left,j=e.top,k=e.width,l=e.height,m=i+k,z=j+l,A=0,C=0,D=d.width,E=d.height,F=!0;switch(!h&&a.shiftKey&&(h=k&&l?k/l:1),this.limited&&(A=e.minLeft,C=e.minTop,D=A+Math.min(d.width,c.width,c.left+c.width),E=C+Math.min(d.height,c.height,c.top+c.height)),H=f[Object.keys(f)[0]],I={x:H.endX-H.startX,y:H.endY-H.startY},J=function(a){switch(a){case r:m+I.x>D&&(I.x=D-m);break;case s:i+I.x<A&&(I.x=A-i);break;case u:j+I.y<C&&(I.y=C-j);break;case t:z+I.y>E&&(I.y=E-z)}},g){case n:i+=I.x,j+=I.y;break;case r:if(I.x>=0&&(m>=D||h&&(C>=j||z>=E))){F=!1;break}J(r),k+=I.x,0>k&&(g=s,k=-k,i-=k),h&&(l=k/h,j+=(e.height-l)/2);break;case u:if(I.y<=0&&(C>=j||h&&(A>=i||m>=D))){F=!1;break}J(u),l-=I.y,j+=I.y,0>l&&(g=t,l=-l,j-=l),h&&(k=l*h,i+=(e.width-k)/2);break;case s:if(I.x<=0&&(A>=i||h&&(C>=j||z>=E))){F=!1;break}J(s),k-=I.x,i+=I.x,0>k&&(g=r,k=-k,i-=k),h&&(l=k/h,j+=(e.height-l)/2);break;case t:if(I.y>=0&&(z>=E||h&&(A>=i||m>=D))){F=!1;break}J(t),l+=I.y,0>l&&(g=u,l=-l,j-=l),h&&(k=l*h,i+=(e.width-k)/2);break;case v:if(h){if(I.y<=0&&(C>=j||m>=D)){F=!1;break}J(u),l-=I.y,j+=I.y,k=l*h}else J(u),J(r),I.x>=0?D>m?k+=I.x:I.y<=0&&C>=j&&(F=!1):k+=I.x,I.y<=0?j>C&&(l-=I.y,j+=I.y):(l-=I.y,j+=I.y);0>k&&0>l?(g=y,l=-l,k=-k,j-=l,i-=k):0>k?(g=w,k=-k,i-=k):0>l&&(g=x,l=-l,j-=l);break;case w:if(h){if(I.y<=0&&(C>=j||A>=i)){F=!1;break}J(u),l-=I.y,j+=I.y,k=l*h,i+=e.width-k}else J(u),J(s),I.x<=0?i>A?(k-=I.x,i+=I.x):I.y<=0&&C>=j&&(F=!1):(k-=I.x,i+=I.x),I.y<=0?j>C&&(l-=I.y,j+=I.y):(l-=I.y,j+=I.y);0>k&&0>l?(g=x,l=-l,k=-k,j-=l,i-=k):0>k?(g=v,k=-k,i-=k):0>l&&(g=y,l=-l,j-=l);break;case y:if(h){if(I.x<=0&&(A>=i||z>=E)){F=!1;break}J(s),k-=I.x,i+=I.x,l=k/h}else J(t),J(s),I.x<=0?i>A?(k-=I.x,i+=I.x):I.y>=0&&z>=E&&(F=!1):(k-=I.x,i+=I.x),I.y>=0?E>z&&(l+=I.y):l+=I.y;0>k&&0>l?(g=v,l=-l,k=-k,j-=l,i-=k):0>k?(g=x,k=-k,i-=k):0>l&&(g=w,l=-l,j-=l);break;case x:if(h){if(I.x>=0&&(m>=D||z>=E)){F=!1;break}J(r),k+=I.x,l=k/h}else J(t),J(r),I.x>=0?D>m?k+=I.x:I.y>=0&&z>=E&&(F=!1):k+=I.x,I.y>=0?E>z&&(l+=I.y):l+=I.y;0>k&&0>l?(g=w,l=-l,k=-k,j-=l,i-=k):0>k?(g=y,k=-k,i-=k):0>l&&(g=v,l=-l,j-=l);break;case p:this.move(I.x,I.y),F=!1;break;case q:this.zoom(Qb(f),a),F=!1;break;case o:if(!I.x||!I.y){F=!1;break}G=Kb(this.cropper),i=H.startX-G.left,j=H.startY-G.top,k=e.minWidth,l=e.minHeight,I.x>0?g=I.y>0?x:v:I.x<0&&(i-=k,g=I.y>0?y:w),I.y<0&&(j-=l),this.cropped||(yb(this.cropBox,B),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}F&&(e.width=k,e.height=l,e.left=i,e.top=j,this.action=g,this.renderCropBox()),qb(f,function(a){a.startX=a.endX,a.startY=a.endY})}},gc={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&xb(this.dragBox,E),yb(this.cropBox,B),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=rb({},this.initialImageData),this.canvasData=rb({},this.initialCanvasData),this.cropBoxData=rb({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(rb(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),yb(this.dragBox,E),xb(this.cropBox,B)),this},replace:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return!this.disabled&&a&&(this.isImg&&(this.element.src=a),b?(this.url=a,this.image.src=a,this.ready&&(this.viewBoxImage.src=a,qb(this.previews,function(b){b.getElementsByTagName("img")[0].src=a}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(a))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,yb(this.cropper,A)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,xb(this.cropper,A)),this},destroy:function(){var a=this.element;return a[m]?(a[m]=void 0,this.isImg&&this.replaced&&(a.src=this.originalUrl),this.uncreate(),this):this},move:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=this.canvasData,d=c.left,e=c.top;return this.moveTo(jb(a)?a:d+Number(a),jb(b)?b:e+Number(b))},moveTo:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=this.canvasData,d=!1;return a=Number(a),b=Number(b),this.ready&&!this.disabled&&this.options.movable&&(hb(a)&&(c.left=a,d=!0),hb(b)&&(c.top=b,d=!0),d&&this.renderCanvas(!0)),this},zoom:function(a,b){var c=this.canvasData;return a=Number(a),a=0>a?1/(1-a):1+a,this.zoomTo(c.width*a/c.naturalWidth,null,b)},zoomTo:function(a,b,c){var j,k,l,m,n,d=this.options,e=this.canvasData,f=e.width,g=e.height,h=e.naturalWidth,i=e.naturalHeight;if(a=Number(a),a>=0&&this.ready&&!this.disabled&&d.zoomable){if(j=h*a,k=i*a,Jb(this.element,Z,{ratio:a,oldRatio:f/h,originalEvent:c})===!1)return this;c?(l=this.pointers,m=Kb(this.cropper),n=l&&Object.keys(l).length?Sb(l):{pageX:c.pageX,pageY:c.pageY},e.left-=(j-f)*((n.pageX-m.left-e.left)/f),e.top-=(k-g)*((n.pageY-m.top-e.top)/g)):mb(b)&&hb(b.x)&&hb(b.y)?(e.left-=(j-f)*((b.x-e.left)/f),e.top-=(k-g)*((b.y-e.top)/g)):(e.left-=(j-f)/2,e.top-=(k-g)/2),e.width=j,e.height=k,this.renderCanvas(!0)}return this},rotate:function(a){return this.rotateTo((this.imageData.rotate||0)+Number(a))},rotateTo:function(a){return a=Number(a),hb(a)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=a%360,this.renderCanvas(!0,!0)),this},scaleX:function(a){var b=this.imageData.scaleY;return this.scale(a,hb(b)?b:1)},scaleY:function(a){var b=this.imageData.scaleX;return this.scale(hb(b)?b:1,a)},scale:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=this.imageData,d=!1;return a=Number(a),b=Number(b),this.ready&&!this.disabled&&this.options.scalable&&(hb(a)&&(c.scaleX=a,d=!0),hb(b)&&(c.scaleY=b,d=!0),d&&this.renderCanvas(!0,!0)),this},getData:function(){var f,g,h,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,b=this.options,c=this.imageData,d=this.canvasData,e=this.cropBoxData;return this.ready&&this.cropped?(f={x:e.left-d.left,y:e.top-d.top,width:e.width,height:e.height},g=c.width/c.naturalWidth,qb(f,function(a,b){f[b]=a/g}),a&&(h=Math.round(f.y+f.height),i=Math.round(f.x+f.width),f.x=Math.round(f.x),f.y=Math.round(f.y),f.width=i-f.x,f.height=h-f.y)):f={x:0,y:0,width:0,height:0},b.rotatable&&(f.rotate=c.rotate||0),b.scalable&&(f.scaleX=c.scaleX||1,f.scaleY=c.scaleY||1),f},setData:function(a){var f,g,b=this.options,c=this.imageData,d=this.canvasData,e={};return this.ready&&!this.disabled&&mb(a)&&(f=!1,b.rotatable&&hb(a.rotate)&&a.rotate!==c.rotate&&(c.rotate=a.rotate,f=!0),b.scalable&&(hb(a.scaleX)&&a.scaleX!==c.scaleX&&(c.scaleX=a.scaleX,f=!0),hb(a.scaleY)&&a.scaleY!==c.scaleY&&(c.scaleY=a.scaleY,f=!0)),f&&this.renderCanvas(!0,!0),g=c.width/c.naturalWidth,hb(a.x)&&(e.left=a.x*g+d.left),hb(a.y)&&(e.top=a.y*g+d.top),hb(a.width)&&(e.width=a.width*g),hb(a.height)&&(e.height=a.height*g),this.setCropBoxData(e)),this},getContainerData:function(){return this.ready?rb({},this.containerData):{}},getImageData:function(){return this.sized?rb({},this.imageData):{}},getCanvasData:function(){var a=this.canvasData,b={};return this.ready&&qb(["left","top","width","height","naturalWidth","naturalHeight"],function(c){b[c]=a[c]}),b},setCanvasData:function(a){var b=this.canvasData,c=b.aspectRatio;return this.ready&&!this.disabled&&mb(a)&&(hb(a.left)&&(b.left=a.left),hb(a.top)&&(b.top=a.top),hb(a.width)?(b.width=a.width,b.height=a.width/c):hb(a.height)&&(b.height=a.height,b.width=a.height*c),this.renderCanvas(!0)),this},getCropBoxData:function(){var b,a=this.cropBoxData;return this.ready&&this.cropped&&(b={left:a.left,top:a.top,width:a.width,height:a.height}),b||{}},setCropBoxData:function(a){var d,e,b=this.cropBoxData,c=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&mb(a)&&(hb(a.left)&&(b.left=a.left),hb(a.top)&&(b.top=a.top),hb(a.width)&&a.width!==b.width&&(d=!0,b.width=a.width),hb(a.height)&&a.height!==b.height&&(e=!0,b.height=a.height),c&&(d?b.height=b.width/c:e&&(b.width=b.height*c)),this.renderCropBox()),this},getCroppedCanvas:function(){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ready&&window.HTMLCanvasElement?(b=this.canvasData,c=Vb(this.image,this.imageData,b,a),this.cropped?(d=this.getData(),f=d.x,g=d.y,h=d.width,i=d.height,j=c.width/Math.floor(b.naturalWidth),1!==j&&(f*=j,g*=j,h*=j,i*=j),k=h/i,l=Tb({aspectRatio:k,width:a.maxWidth||1/0,height:a.maxHeight||1/0}),m=Tb({aspectRatio:k,width:a.minWidth||0,height:a.minHeight||0},"cover"),n=Tb({aspectRatio:k,width:a.width||(1!==j?c.width:h),height:a.height||(1!==j?c.height:i)}),o=n.width,p=n.height,o=Math.min(l.width,Math.max(m.width,o)),p=Math.min(l.height,Math.max(m.height,p)),q=document.createElement("canvas"),r=q.getContext("2d"),q.width=tb(o),q.height=tb(p),r.fillStyle=a.fillColor||"transparent",r.fillRect(0,0,o,p),s=a.imageSmoothingEnabled,t=void 0===s?!0:s,u=a.imageSmoothingQuality,r.imageSmoothingEnabled=t,u&&(r.imageSmoothingQuality=u),v=c.width,w=c.height,x=f,y=g,-h>=x||x>v?(x=0,z=0,B=0,D=0):0>=x?(B=-x,x=0,z=Math.min(v,h+x),D=z):v>=x&&(B=0,z=Math.min(h,v-x),D=z),0>=z||-i>=y||y>w?(y=0,A=0,C=0,E=0):0>=y?(C=-y,y=0,A=Math.min(w,i+y),E=A):w>=y&&(C=0,A=Math.min(i,w-y),E=A),F=[x,y,z,A],D>0&&E>0&&(G=o/h,F.push(B*G,C*G,D*G,E*G)),r.drawImage.apply(r,[c].concat(e(F.map(function(a){return Math.floor(tb(a))})))),q):c):null},setAspectRatio:function(a){var b=this.options;return this.disabled||jb(a)||(b.aspectRatio=Math.max(0,a)||0/0,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(a){var e,f,b=this.options,c=this.dragBox,d=this.face;return this.ready&&!this.disabled&&(e=a===I,f=b.movable&&a===J,a=e||f?a:K,b.dragMode=a,Db(c,G,a),zb(c,z,e),zb(c,F,f),b.cropBoxMovable||(Db(d,G,a),zb(d,z,e),zb(d,F,f))),this}},hc=j.Cropper,ic=function(){function a(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(this,a),!c||!bb.test(c.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=c,this.options=rb({},eb,mb(d)&&d),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return d(a,[{key:"init",value:function(){var c,a=this.element,b=a.tagName.toLowerCase();
    if(!a[m]){if(a[m]=this,"img"===b){if(this.isImg=!0,c=a.getAttribute("src")||"",this.originalUrl=c,!c)return;c=a.src}else"canvas"===b&&window.HTMLCanvasElement&&(c=a.toDataURL());this.load(c)}}},{key:"load",value:function(a){var c,d,e,f,b=this;if(a){if(this.url=a,this.imageData={},c=this.element,d=this.options,d.rotatable||d.scalable||(d.checkOrientation=!1),!d.checkOrientation||!window.ArrayBuffer)return this.clone(),void 0;if(ab.test(a))return this.read(Zb(a)),void 0;e=new XMLHttpRequest,f=this.clone.bind(this),this.reloading=!0,this.xhr=e,e.onabort=f,e.onerror=f,e.ontimeout=f,e.onprogress=function(){e.getResponseHeader("content-type")!==$&&e.abort()},e.onload=function(){b.read(e.response)},e.onloadend=function(){b.reloading=!1,b.xhr=null},d.checkCrossOrigin&&Nb(a)&&c.crossOrigin&&(a=Ob(a)),e.open("GET",a),e.responseType="arraybuffer",e.withCredentials="use-credentials"===c.crossOrigin,e.send()}}},{key:"read",value:function(a){var h,b=this.options,c=this.imageData,d=_b(a),e=0,f=1,g=1;d>1&&(this.url=$b(a,$),h=ac(d),e=h.rotate,f=h.scaleX,g=h.scaleY),b.rotatable&&(c.rotate=e),b.scalable&&(c.scaleX=f,c.scaleY=g),this.clone()}},{key:"clone",value:function(){var c,d,e,a=this.element,b=this.url;this.options.checkCrossOrigin&&Nb(b)&&(c=a.crossOrigin,c?d=b:(c="anonymous",d=Ob(b))),this.crossOrigin=c,this.crossOriginUrl=d,e=document.createElement("img"),c&&(e.crossOrigin=c),e.src=d||b,this.image=e,e.onload=this.start.bind(this),e.onerror=this.stop.bind(this),xb(e,C),a.parentNode.insertBefore(e,a.nextSibling)}},{key:"start",value:function(){var c,d,e,f,a=this,b=this.isImg?this.element:this.image;return b.onload=null,b.onerror=null,this.sizing=!0,c=j.navigator&&/^(?:.(?!chrome|android))*safari/i.test(j.navigator.userAgent),d=function(b,c){rb(a.imageData,{naturalWidth:b,naturalHeight:c,aspectRatio:b/c}),a.sizing=!1,a.sized=!0,a.build()},b.naturalWidth&&!c?(d(b.naturalWidth,b.naturalHeight),void 0):(e=document.createElement("img"),f=document.body||document.documentElement,this.sizingImage=e,e.onload=function(){d(e.width,e.height),c||f.removeChild(e)},e.src=b.src,c||(e.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",f.appendChild(e)),void 0)}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){var a,b,c,d,e,f,g,h,i,j;this.sized&&!this.ready&&(a=this.element,b=this.options,c=this.image,d=a.parentNode,e=document.createElement("div"),e.innerHTML=fb,f=e.querySelector(".".concat(m,"-container")),g=f.querySelector(".".concat(m,"-canvas")),h=f.querySelector(".".concat(m,"-drag-box")),i=f.querySelector(".".concat(m,"-crop-box")),j=i.querySelector(".".concat(m,"-face")),this.container=d,this.cropper=f,this.canvas=g,this.dragBox=h,this.cropBox=i,this.viewBox=f.querySelector(".".concat(m,"-view-box")),this.face=j,g.appendChild(c),xb(a,B),d.insertBefore(f,a.nextSibling),this.isImg||yb(c,C),this.initPreview(),this.bind(),b.initialAspectRatio=Math.max(0,b.initialAspectRatio)||0/0,b.aspectRatio=Math.max(0,b.aspectRatio)||0/0,b.viewMode=Math.max(0,Math.min(3,Math.round(b.viewMode)))||0,xb(i,B),b.guides||xb(i.getElementsByClassName("".concat(m,"-dashed")),B),b.center||xb(i.getElementsByClassName("".concat(m,"-center")),B),b.background&&xb(f,"".concat(m,"-bg")),b.highlight||xb(j,D),b.cropBoxMovable&&(xb(j,F),Db(j,G,n)),b.cropBoxResizable||(xb(i.getElementsByClassName("".concat(m,"-line")),B),xb(i.getElementsByClassName("".concat(m,"-point")),B)),this.render(),this.ready=!0,this.setDragMode(b.dragMode),b.autoCrop&&this.crop(),this.setData(b.data),nb(b.ready)&&Ib(a,W,b.ready,{once:!0}),Jb(a,W))}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),yb(this.element,B))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=hc,a}},{key:"setDefaults",value:function(a){rb(eb,mb(a)&&a)}}]),a}();return rb(ic.prototype,bc,cc,dc,ec,fc,gc),ic});